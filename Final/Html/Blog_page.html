<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>QuakeAware Mindanao - Recent Events</title>
  <link rel="icon" type="image/png" href="../Pictures/logo.png">
  <link rel="stylesheet" href="../Css/blog_page_style.css">
</head>

<body>

  <!-- HEADER -->
  <header>
    <div style="display:flex; align-items:center;">
      <span class="menu-btn" id="menuBtn">☰</span>
      <a href="homepage.html"class="logo-link">
    <img src="../Pictures/logo.png" alt="Website Logo" class="top">
</a>
      <h1>QuakeAware Mindanao</h1>
    </div>

    <nav>
      <ul>
        <li><a href="homepage.html">Home</a></li>
        <li><a href="Blog_page.html" class="active">Recent Events</a></li>
        <li><a href="SafetyTips.html">Safety Tips</a></li>
        <li><a href="About.html">About</a></li>
        <li><a href="Contact.html">Contact</a></li>
      </ul>
    </nav>
  </header>

  <!-- SIDE MENU -->
  <div class="side-menu" id="sideMenu">
    <span class="close-btn" id="closeMenu">&times;</span>
    <div class="side-logo">
      <img src="../Pictures/logo.png" alt="QuakeAware Mindanao Logo">
    </div>

    <ul>
      <li><a href="homepage.html">Home</a></li>
      <li><a href="Blog_page.html" class="active">Recent Events</a></li>
      <li><a href="SafetyTips.html">Safety Tips</a></li>
      <li><a href="About.html">About</a></li>
      <li><a href="Contact.html">Contact</a></li>
    </ul>
  </div>

  <!-- PAGE TITLE -->
  <section class="page-title">
    <h2>Recent Earthquake Events</h2>
    <p>Stay updated with the latest earthquake reports across Mindanao.</p>
  </section>

  <div class="notification-bar">
  <a href="#live-bulletin" id="eq-warning-link">
    A strong earthquake has occurred! Click for details.
  </a>
</div>

  <!-- EVENTS SECTION -->
  <section class="events">

    <!-- EVENT 1 -->
    <div class="event" onclick="window.location.href='union-earthquake.html'">
      <img src="../Pictures/union-mindanao.webp" alt="Union Earthquake">
      <div class="event-content">
        <h4>Union | Oct 16, 2025 | M6.1</h4>
        <p>A strong earthquake registered by the USGS as M6.1 struck near Union, Mindanao, Philippines at 23:03 UTC on October 16, 2025.</p>
      </div>
    </div>

    <!-- EVENT 2 -->
    <div class="event" onclick="window.location.href='bukidnon-earthquake.html'">
      <img src="../Pictures/Bukidnon-earthquake.jpg" alt="Bukidnon Earthquake">
      <div class="event-content">
        <h4>Bukidnon | Oct 10, 2025 | M7.4</h4>
        <p>Several government and private school buildings sustained structural damage following the magnitude 7.4 earthquake.</p>
      </div>
    </div>

    <!-- EVENT 3 -->
    <div class="event" onclick="window.location.href='davao-earthquake.html'">
      <img src="../Pictures/davao-oriental.webp" alt="Davao Oriental Earthquake">
      <div class="event-content">
        <h4>Manay, Davao Oriental | Oct 10, 2025 | M6.8</h4>
        <p>A magnitude 6.8 earthquake struck off the coast of Manay, Davao Oriental Friday night.</p>
      </div>
    </div>

    <!-- SEE MORE BUTTON -->
    <div class="see-more-wrapper">
      <span id="toggleBtn">See More</span>
    </div>

    <!-- EVENT 4 -->
    <div class="event hidden" onclick="window.location.href='BukSU.html'">
      <img src="../Pictures/buksu.png" alt="Event 4">
      <div class="event-content">
        <h4>Malaybalay City | March 14, 2025 | N/A</h4>
        <p>Bukidnon State University-Alubijid Campus participated in the first quarter 2025 Nationwide Simultaneous Earthquake Drill (NSED) on March 13, 2025 in consonance with the government’s initiative to intensify disaster preparedness.</p>
      </div>
    </div>

    <!-- EVENT 5 -->
    <div class="event hidden" onclick="window.location.href='Sarangani-earthquake.html'">
      <img src="../Pictures/sarangani.webp" alt="Event 5">
      <div class="event-content">
        <h4>Sarangani, Mindanao | April 16, 2025 | M5.7</h4>
        <p>A magnitude 5.7 earthquake struck the waters off Sarangani province on Wednesday morning, the Philippine Institute of Volcanology and Seismology said.</p>
      </div>
    </div>

    <!-- EVENT 6 -->
    <div class="event hidden" onclick="window.location.href='Hinatuan-earthquake.html'">
      <img src="../Pictures/Hinatuan.jpg" alt="Event 6">
      <div class="event-content">
        <h4>Hinatuan, Surigao Del Sur | Dec 2, 2023 | M7.4</h4>
        <p>Philippines – The provincial government of Surigao del Sur has placed the entire province under a state of calamity after a powerful magnitude 7.4 earthquake struck off its coasts on Saturday evening (December 2).</p>
      </div>
    </div>

    <!-- SHOW LESS BUTTON -->
    <div class="show-less-bottom hidden">
      <span id="showLessBottomBtn">Show Less</span>
    </div>

  </section>

  <!-- LIVE BULLETIN -->
  <section class="container" id="live-bulletin">
    <h2>Live Earthquake Bulletin</h2>

    <iframe 
      src="https://earthquake.phivolcs.dost.gov.ph/EQLatest.html"
      title="PHIVOLCS Live Earthquake Bulletin"
      frameborder="0"
      scrolling="yes">
    </iframe>
  </section>

  <div id="modalOverlay" class="mapOverlay">
    <div class="mapBox">
      <span id="closeModal" class="closeMap">&times;</span>
      <h3 class="mapTitle">Live Earthquake Bulletin - Fullscreen</h3>
      <iframe src="https://earthquake.phivolcs.dost.gov.ph/EQLatest.html"
            title="PHIVOLCS Live Earthquake Bulletin Fullscreen"
            width="100%" height="480" frameborder="0" scrolling="yes"></iframe>
    </div>
  </div>

  <!-- FOOTER -->
  <footer> 
    <div class="footer-main"> 
      <span class="footer-title">Data Sources:</span> 
      <a href="https://earthquake.phivolcs.dost.gov.ph" target="_blank">PHIVOLCS</a> 
      <span>|</span> <a href="https://www.buksu.edu.ph" target="_blank">Bukidnon State University</a> 
      <span>|</span> <a href="https://newsinfo.inquirer.net" target="_blank">Philippine Daily Inquirer</a> 
    </div> <div class="footer-sub"> 
      <span>2025 QuakeAware Mindanao</span> 
    </div> 
  </footer>

  <!-- SCRIPT -->
  <script>
    // MENU BUTTON
    const menuBtn = document.getElementById('menuBtn');
    const sideMenu = document.getElementById('sideMenu');
    const closeMenu = document.getElementById('closeMenu');

    menuBtn.addEventListener('click', () => sideMenu.classList.add('active'));
    closeMenu.addEventListener('click', () => sideMenu.classList.remove('active'));
    // SHOW MORE / SHOW LESS
    const toggleBtn = document.getElementById("toggleBtn");
    const bottomShowLess = document.getElementById("showLessBottomBtn");
    const hiddenEvents = document.querySelectorAll(".event.hidden");
    const bottomWrapper = document.querySelector(".show-less-bottom");
    const eventsSection = document.querySelector(".events");

    let expanded = false;

    function showMore() {
      hiddenEvents.forEach(e => e.classList.remove("hidden"));
      toggleBtn.textContent = "Show Less";
      bottomWrapper.classList.remove("hidden");

      const first = hiddenEvents[0].offsetTop - 120;
      window.scrollTo({ top: first, behavior: "smooth" });
    }

    function showLess() {
      hiddenEvents.forEach(e => e.classList.add("hidden"));
      toggleBtn.textContent = "See More";
      bottomWrapper.classList.add("hidden");

      const top = eventsSection.offsetTop - 100;
      window.scrollTo({ top, behavior: "smooth" });
    }

    toggleBtn.addEventListener("click", () => {
      expanded ? showLess() : showMore();
      expanded = !expanded;
    });

    bottomShowLess.addEventListener("click", () => {
      showLess();
      expanded = false;
    });
    
    //NOTIFICATION BAR
    document.getElementById('eq-warning-link').addEventListener('click', function(event) {
      event.preventDefault();
    const bulletin = document.getElementById('live-bulletin');
    bulletin.scrollIntoView({ behavior: 'smooth', block: 'start' });

    bulletin.style.boxShadow = "0 0 10px 5px #f5d442";
    bulletin.style.transition = "box-shadow 0.6s";
    setTimeout(function() {
    bulletin.style.boxShadow = "";
    }, 2000);
    });

    const fullscreenBtn = document.getElementById('fullscreenBtn');
    const modalOverlay = document.getElementById('modalOverlay');
    const closeModal = document.getElementById('closeModal');

    fullscreenBtn.addEventListener('click', function() {
    modalOverlay.style.display = "flex";
    });

    closeModal.addEventListener('click', function() {
    modalOverlay.style.display = "none";
    });

    window.addEventListener('click', function(e) {
    if (e.target === modalOverlay) {
    modalOverlay.style.display = "none";
    }
    });

    async function checkEarthquakes() {
    const url = "https://api.allorigins.win/raw?url=" +
            encodeURIComponent("https://earthquake.phivolcs.dost.gov.ph/api/earthquake");

    const response = await fetch(url);
    const data = await response.json();

    const bar = document.querySelector(".notification-bar");
    const link = document.getElementById("eq-warning-link");

    try {
        const response = await fetch(url);
        const data = await response.json();

        console.log("PHIVOLCS:", data)

        const latestTwo = data.slice(0, 2);

        let msg = "";

        latestTwo.forEach((eq, i) => {
            msg += `⚠️ M${eq.magnitude} — ${eq.place}`;
            if (i === 0) msg += " (Latest)";
            if (i < latestTwo.length - 1) msg += " • ";
        });

        bar.style.display = "block";
        link.textContent = msg;

    } catch (err) {
        console.log("PHIVOLCS Error:", err);

        bar.style.display = "block";
        link.textContent = "⚠️ Cannot load earthquake data. Click for bulletin.";
    }
}

checkEarthquakes();

setInterval(checkEarthquakes, 300000);

  </script>

</body>
</html>